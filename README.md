# Приложение Weather. 
## Одна из домашних работ курса "iOS-разработчик за 20 недель" сайта [swiftbook.ru](https://www.swiftbook.ru).

### Язык: Swift
### Тема урока: Работа с сетью (URLSession, Alamofire)
### Требование к домашнему заданию: взять любое публичное API и разработать приложение с его использованием
### Время выполнения работы: 2 дня

* «Основы Swift»
* «Введение в iOS-разработку»
* «Пользовательский интерфейс»
* «Многопоточность»
* «Работа с сетью»
* «Хранение данных»
* «Мультимедиа и другие фреймворки»

На протяжении всего курса обучения создавалось приложение аналог социальной сети Instagram. На момент написания диплома был реализован функционал приведенный на макете:

![Макет базовой работы](https://i.ibb.co/4Z3SSYj/image.png)

Приложение содержит экран авторизации, TabBar с тремя экранами: 

**Лента** - размещены все публикации, возможность отметить лайком понравившийся пост, перейти на профиль разместившего пост, перейти на экран пользователей поставивших лайк.

**Профиль** - публикации и информация о пользователе, информация о подписках и подписчиках, возможность перейти на эти списки, возможность отписаться или подписаться на пользователя.

**Новая публикация** - возможность выбрать предустановленную картинку, наложить на нее фильтр и разместить новую публикацию.

Все данные получаем с локального сервера. При отсутствии связи с сервером включается офлайн режим - сохраняем данные используя CoreData, приложение продолжает показывать часть информации, при попытке получить данные с сервера получаем уведомление про отсутствующее соединение.

## Доработки для Диплома

#### 1. UI изменения:
1. Изменены все кнопки, теперь используются SF символы рекомендуемые Apple.
2. Изменение аватарок в лене - теперь они круглые.
3. Добавлена поддержка темной и светлой темы. Использование системный цветов.
4. Увеличено отображение предпросмотра фильтров.
5. Размещение кнопки фотоаппарата для будущего добавления фотографий из камеры.
6. Возможность подписаться/отписаться при просмотре поставивших лайк на основной ленте и при просмотре подписок/отписок и профиля.

#### 2. NewPost изменения:
1. Фотографии для новых публикаций теперь берутся из телефона. Задействована библиотека Photo.
2. Кеширование фотографий используя PHCachingImageManager
3. Отслеживание изменения в библиотеке фотографий: использовал PHPhotoLibraryChangeObserver
4. Динамической изменние количества отображаемых фотографий CollectionView, на разных экранах по разному располагаются ячейки.

#### 3. Refactoring:
1. Проведена декомпозиции сетевой работы приложения. Каждая зона ответственности вынесена в отдельный класс, добавлено требование протоколов.
2. Проведена декомпозиция работы в офлайн режиме. Каждая зона ответственности вынесена в отдельный класс, добавлено требование протоколов.
3. Изменение отображение фильтров и их подписей.
4. Использование встроенного Result блока.

#### 4. Локализация приложения:
1. Добавлена поддержка Английского, Русского, Украинского языков.
2. Локализация строк производится используя SwiftGen.

#### Светлая/Темная тема
![Светлая/Темная тема](https://i.ibb.co/sb03XQs/2020-10-10-18-55-01.png)

#### Подписка/отписка со списка поставивших лайк, Отображение фото из альбома телефона, Отображение фильров
![Подписка/отписка со списка поставивших лайк, Отображение фото из альбома телефона, Отображение фильров](https://i.ibb.co/3cwC479/2020-10-10-19-03-57.png)

#### Локализация: Английский, Украинский, Русский. Светлая/Темная тема
![Локализация: Английский, Украинский, Русский. Светалая/Темная тема](https://i.ibb.co/4TtdBvV/2020-10-10-18-59-17.png)

## Запуск сервера

Перед запуском вам необходимо установить **Vapor**. Это фреймворк для создания веб серверов на Swift. Для его установки можно воспользоваться пакетным менеджером **brew**. Если у вас его еще нет выполните в терминале эту команду **/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"**

Далее воспользуйтесь командой **brew install vapor/tap/vapor** для установки самого фреймворка.
Если не установлена libressl произведите установку **brew install libressl**

Для установки выполнить команду в директории проекта:
sudo xattr -d com.apple.quarantine Run(файл Run должен быть в папке с проектом)

Для запуска сервера откройте терминал, с помощью команды **cd** перейдите в папку с проектом и выполните **./Run**. 

Для остановки сервера нажмите **Control + C** либо просто закройте терминал. Запускать сервер нужно обязательно так иначе он не найдет изображения в папке Public. Папка Public должна обязательно находиться рядом с исполняемым файлом. После перезапуска сервер возвращается в исходное состояние.

Для входа в приложение используйте логин **user** и пароль **qwerty**
